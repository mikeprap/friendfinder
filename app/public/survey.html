<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8 ">
    <title>FriendFinder</title>

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

</head>

<body>
    <div class="container">
        <h2>Survey Questions</h2>
        <hr>
        <h3>Tell us about yourself!</h3>
        <h4>Your name (required)</h4>
        <input type="text" id="name" class="form-control" required>
        <h4>Link to an image of you (required)</h4>
        <input type="text" id="photo" class="form-control" required>
        <hr>
        
        <h4> Answer the questions below on a scale of 1 to 5, 1 is the LEAST like you, and 5 is the MOST like you.
        </h4>
        <form>
            <div class="form-group">
                <label for="1">I feel nervous any time i have to talk to a new person</label>
                <select class="form-control" id="1">
                    <option value="empty"></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="2">I work hard on everthing i do and never slack off. </label>
                <select class="form-control" id="2">
                    <option value="empty"></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="3">I go to the gym multiple times a week.</label>
                <select class="form-control" id="3">
                    <option value="empty"></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="4">I enjoy what i do for a living!</label>
                <select class="form-control" id="4">
                    <option value="empty"></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="5">I dont like being out for more than a few hours at a time.</label>
                <select class="form-control" id="5">
                    <option value="empty"></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="6">I enjoy playing video games in my spare time.</label>
                <select class="form-control" id="6">
                    <option value="empty"></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="7">.....</label>
                <select class="form-control" id="7">
                    <option value="empty"></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="8">......</label>
                <select class="form-control" id="8">
                    <option value="empty"></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="9">....</label>
                <select class="form-control" id="9">
                    <option value="empty"></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="10">......</label>
                <select class="form-control" id="10">
                    <option value="empty"></option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
        </form>
        <br>
        <button type="submit" class="btn btn-primary btn-lg btn-block" id="submitBtn">
            <i class="fa fa-check-circle" aria-hidden="true"></i>
            Submit
        </button>
      
        <div id="newFriendMatch" class="modal fade" role="dialog" aria-hidden="true" width="300px">
            <div class="modal-content">
                <div class="modal-header text-center">
                    <h4>Friend Match</h4>
                </div>
                <div class="modal-body text-center">
                    <h5 id="newFriend"></h5>
                    <img id="newFriendPhoto" width="30%" src="">
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
            </div>   
        </div>
    </div>
    <hr>
    <footer class="footer">
        <div class="container">
            <p><a href="/api/friends">API Friends List</a> | 
        </div>
    </footer>
</body>

<script type="text/javascript">

$("#submitBtn").on("click", function (event) {
        
        var valid = true;
        if ($("#name").val() === "" || $("#photo").val() === "") {
            valid = false;
        } else if ($("#1").val() === "empty" || $("#2").val() === "empty" || $("#3").val() === "empty" || $("#4").val() === "empty" || $("#5").val() === "empty" || $("#6").val() === "empty" || $("#7").val() === "empty" || $("#8").val() === "empty" || $("#9").val() === "empty" || $("#10").val() === "empty") {
            valid = false;
        }
        if (valid === true) {
            
            var newFriend = {
                
                name: $("#name").val().trim(),
                
                photo: $("#photo").val().trim(),
                
                scores: [parseInt($("#1").val()), parseInt($("#2").val()), parseInt($("#3").val()), parseInt($("#4").val()), parseInt($("#5").val()),
                
                parseInt($("#6").val()), parseInt($("#7").val()), parseInt($("#8").val()), parseInt($("#9").val()), parseInt($("#10").val())],
            };
            console.log(newFriend);
            
            $.post("/api/friends", newFriend,
                function (data) {
                    console.log(newFriend);
                    $("#newFriend").text(data.name);
                    $("#newFriendPhoto").attr("src", data.photo);
                    $("#newFriendMatch").modal("toggle");
                });
        } 
        else {
            alert("Please finish filling out the survey!");
        }
        
        
        
        $(".form-control").val("");
        $("#name").val("");
        $("#photo").val("");
    });

</script>
